
<!-- head -->
<!doctype html>
<html>
  <head>
    <title>The ATX Vegan</title>
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0,minimum-scale=1.0">
      <link rel="stylesheet" href="/static/css/main.css"/>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/>
  </head>
  <body>

<!-- /head -->

<!-- body -->

<main class="wrap wrap-main">
  <header class='site-header'>
  <div class="wrap wrap-head">
    <h1 class="site-logo">
      <a class="site-logo-link" href="/">
        <span>ATX</span><span>Vegan</span>
      </a>
    </h1>
    <nav class="nav site-nav">
      <ul class="site-nav-list">
        
          
            <li class="site-nav-list-item"><a class="site-nav-list-item-link" href="/reviews">reviews</a></li>
          
        
          
            <li class="site-nav-list-item">
              <a class="site-nav-list-item-link toggle" href="/">recipes</a>
              <ul class="site-nav-sub-list">
                
                  <li class="site-nav-sub-list-item"><a class="site-nav-sub-list-item-link" href="/american">american</a></li>
                
                  <li class="site-nav-sub-list-item"><a class="site-nav-sub-list-item-link" href="/appetizer">appetizer</a></li>
                
                  <li class="site-nav-sub-list-item"><a class="site-nav-sub-list-item-link" href="/czech">czech</a></li>
                
                  <li class="site-nav-sub-list-item"><a class="site-nav-sub-list-item-link" href="/dinner">dinner</a></li>
                
                  <li class="site-nav-sub-list-item"><a class="site-nav-sub-list-item-link" href="/fast-meals">fast-meals</a></li>
                
                  <li class="site-nav-sub-list-item"><a class="site-nav-sub-list-item-link" href="/italian">italian</a></li>
                
                  <li class="site-nav-sub-list-item"><a class="site-nav-sub-list-item-link" href="/javascript">javascript</a></li>
                
                  <li class="site-nav-sub-list-item"><a class="site-nav-sub-list-item-link" href="/markdown">markdown</a></li>
                
                  <li class="site-nav-sub-list-item"><a class="site-nav-sub-list-item-link" href="/mexican">mexican</a></li>
                
                  <li class="site-nav-sub-list-item"><a class="site-nav-sub-list-item-link" href="/pwa">pwa</a></li>
                
              </ul>
            </li>
          
        
      </ul>
    </nav>
    <div class="search">
      <input class="search-input" type="text" id="search" placeholder="search"/><button class="search-btn" id="search-btn"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          <path d="M0 0h24v24H0z" fill="none"/>
      </svg></button>
    </div>
  </div>
</header>

  <section class="wrap wrap-body">
    <h1 class="static-header">Test Post 3!!</h2>
    <a href="https://twitter.com/@Dave_Conner">@Dave_Conner</a>
    <p>#Webpack v.2</p>
<h2>resources:</h2>
<ol>
<li><a href="https://webpack.js.org/guides/migrating/">migration</a></li>
<li><a href="https://github.com/webpack-contrib/extract-text-webpack-plugin">ExtractTextPlugin</a></li>
<li><a href="http://www.2ality.com/2015/12/webpack-tree-shaking.html">tree shaking</a></li>
</ol>
<h2>Outline</h2>
<ol>
<li>Migration
<ol>
<li>Loaders</li>
<li>PreLoaders/PostLoaders</li>
<li>ExtractTextPlugin</li>
</ol>
</li>
<li>Custom Properties no longer allowed</li>
<li>Tree shaking</li>
</ol>
<h2>Migration</h2>
<p>Right when you were starting to feel good about your Webpack config file Webpack V2 was released and rained on your parade. Staying on the bleeding edge can get tiresome for as soon as you update Webpack and try to compile you get an error. The good news? There is now a config validator built into Webpack v2 which is pretty sweet.  The bad news? As the validator will tell you, there are several items in your config which are now incompatible with the new api schema. Lucky for us, the team has put together a <a href="https://webpack.js.org/guides/migrating/">migration guide</a>. One of the most improved features of Webpack may actually be their documentation. This guide is straight forward and helpful and the new documents don’t leave you with a headache.</p>
<h3>Loaders</h3>
<p>So how can we get our webpack config back into working shape? For starters we must change <code>module.loaders</code> to <code>module.rules</code>.  Inside our loader objects we have a loader property which used to have several ways of declaring the loaders to be used. Now there are two supported ways. You can either declare a single loader  as a string using <code>rules.loader</code> or an array of loaders using <code>rules.use</code>. The list of loaders chained with the <code>!</code> is only supported using the legacy option <code>module.loaders</code>. As this statement implies the <code>modules.loaders</code> syntax is still valid for compatibility reason but the clarity of the new naming convention along with the new configuration abilities make the new syntax a best practice moving forward.</p>
<pre><code><table class='code-table'><tr>
                <td class='line-number' data-pseudo-content=1></td>
                <td><span class="hljs-built_in">module</span>: {</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=2></td>
                <td>   <span class="hljs-comment">//all loaders used in webpack</span></td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=3></td>
                <td>    rules: [</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=4></td>
                <td>      {</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=5></td>
                <td>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=6></td>
                <td>        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=7></td>
                <td>        <span class="hljs-attr">use</span>: <span class="hljs-string">'babel-loader'</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=8></td>
                <td>      },</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=9></td>
                <td>      {</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=10></td>
                <td>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.scss$/</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=11></td>
                <td>        <span class="hljs-attr">use</span>: [<span class="hljs-string">'style-loader?sourceMap'</span>, <span class="hljs-string">'css-loader?sourceMap'</span>, <span class="hljs-string">'postcss-loader?sourceMap'</span>, <span class="hljs-string">'sass-loader?sourceMap'</span>]</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=12></td>
                <td>      }</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=13></td>
                <td>    ]</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=14></td>
                <td>}</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=15></td>
                <td></td>
              </tr></table></code></pre>
<p>The other gotcha with the new syntax is that the automatic <code>-loader</code> module name extension was removed for clarity. You can still opt into the old behavior with the <code>resolveLoader.moduleExtensions</code> but is not recommended.</p>
<pre><code><table class='code-table'><tr>
                <td class='line-number' data-pseudo-content=1></td>
                <td><span class="hljs-selector-tag">resolveLoader</span>: {</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=2></td>
                <td>  <span class="hljs-attribute">moduleExtensions</span>: [<span class="hljs-string">"-loader"</span>]</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=3></td>
                <td>}</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=4></td>
                <td></td>
              </tr></table></code></pre>
<h3>Preloaders/ Postloaders</h3>
<p>So for those of us using a preloader for linting or whatever reason there is another breaking change. Both <code>module.preLoaders</code> and <code>module.postLoaders</code> were removed. Now we will include them as a loader object in the <code>mdoule.rules</code> array like our other loaders and just add the <code>enforce</code> property with a value of <code>”pre”</code></p>
<pre><code><table class='code-table'><tr>
                <td class='line-number' data-pseudo-content=1></td>
                <td>{</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=2></td>
                <td>  <span class="hljs-attribute">test</span>: /\.js$/,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=3></td>
                <td>    enforce: <span class="hljs-string">"pre"</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=4></td>
                <td>  loader: <span class="hljs-string">"eslint-loader"</span></td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=5></td>
                <td>}</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=6></td>
                <td></td>
              </tr></table></code></pre>
<h3>Loader Configuration</h3>
<p>You can no longer configure a loader with custom properties in your config file. They must all be done through the options property in the loader object.</p>
<pre><code><table class='code-table'><tr>
                <td class='line-number' data-pseudo-content=1></td>
                <td>{</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=2></td>
                <td>  <span class="hljs-attribute">test</span>: /\.js$/,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=3></td>
                <td>  enforce: <span class="hljs-string">"pre"</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=4></td>
                <td>  loader: <span class="hljs-string">"eslint-loader"</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=5></td>
                <td>  options: {</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=6></td>
                <td>    fix: true</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=7></td>
                <td>  }</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=8></td>
                <td>}</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=9></td>
                <td></td>
              </tr></table></code></pre>
<p>Alternatively you can pass in options using the webpack.LoaderOptionsPlugin. The following adds autoprefixer to the postcss plugin.</p>
<pre><code><table class='code-table'><tr>
                <td class='line-number' data-pseudo-content=1></td>
                <td><span class="hljs-keyword">var</span> postCSS = <span class="hljs-keyword">new</span> webpack.LoaderOptionsPlugin({</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=2></td>
                <td>  <span class="hljs-attr">options</span>: {</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=3></td>
                <td>    <span class="hljs-attr">context</span>: path.join(__dirname, <span class="hljs-string">'src'</span>),</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=4></td>
                <td>    <span class="hljs-attr">postcss</span>: [</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=5></td>
                <td>      <span class="hljs-built_in">require</span>(<span class="hljs-string">'autoprefixer'</span>)</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=6></td>
                <td>    ]</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=7></td>
                <td>  }</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=8></td>
                <td>});</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=9></td>
                <td></td>
              </tr></table></code></pre>
<h3>ExtractTextPlugin</h3>
<p>Some plugins were also affected by the update. The ExtractTextPlugin, used to extract styles into their own stylesheet, must be updated to its latest version to be compatible with the new Webpack. The config changes for this plugin are mainly syntactical.</p>
<pre><code><table class='code-table'><tr>
                <td class='line-number' data-pseudo-content=1></td>
                <td>rules: [</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=2></td>
                <td>    {</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=3></td>
                <td>      <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.css$/</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=4></td>
                <td>      <span class="hljs-attr">use</span>: ExtractTextPlugin.extract({</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=5></td>
                <td>        <span class="hljs-attr">fallback</span>: <span class="hljs-string">"style-loader"</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=6></td>
                <td>        <span class="hljs-attr">use</span>: <span class="hljs-string">"css-loader"</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=7></td>
                <td>        <span class="hljs-attr">publicPath</span>: <span class="hljs-string">"/dist"</span></td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=8></td>
                <td>      })</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=9></td>
                <td>    }</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=10></td>
                <td>  ]</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=11></td>
                <td></td>
              </tr></table></code></pre>
<h2>Tree shaking</h2>
<p>So far all of our changes seem to be syntactical and not that compelling. With Webpack v2’s support for ES2015 modules we now have access to a powerful feature which has been made popular by Rollup.js, tree shaking.</p>
<p>Tree shaking is a term commonly used in the JavaScript context for dead-code elimination. While this is not technically what is going on, more like live-code import, the end result is the same, less code being served to the user. Tree shaking relies on ES2015 module import/export for the static structure of its module system. Current JavaScript module formats have a dynamic structure, meaning what is imported and exported can change at runtime, as when nested inside a conditional statement. ES2015 enforces a static structure by only allowing imports and exports at the top level. This static structure along with webpack’s unused module export detection allows Webpack to exclude code which is not being used by our application. Lets look at the example given in the <a href="https://webpack.js.org/guides/tree-shaking/#example">docs</a></p>
<p>math.js</p>
<pre><code><table class='code-table'><tr>
                <td class='line-number' data-pseudo-content=1></td>
                <td><span class="hljs-comment">// This function isn't used anywhere</span></td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=2></td>
                <td><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params">x</span>) </span>{</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=3></td>
                <td>    <span class="hljs-keyword">return</span> x * x;</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=4></td>
                <td>}</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=5></td>
                <td></td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=6></td>
                <td><span class="hljs-comment">// This function gets included</span></td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=7></td>
                <td><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cube</span>(<span class="hljs-params">x</span>) </span>{</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=8></td>
                <td>    <span class="hljs-keyword">return</span> x * x * x;</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=9></td>
                <td>}</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=10></td>
                <td></td>
              </tr></table></code></pre>
<p>main.js</p>
<pre><code><table class='code-table'><tr>
                <td class='line-number' data-pseudo-content=1></td>
                <td><span class="hljs-keyword">import</span> {cube} <span class="hljs-keyword">from</span> <span class="hljs-string">'./maths.js'</span>;</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=2></td>
                <td><span class="hljs-built_in">console</span>.log(cube(<span class="hljs-number">5</span>)); <span class="hljs-comment">// 125</span></td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=3></td>
                <td></td>
              </tr></table></code></pre>
<p>Since the square method is not imported in <code>main.js</code> it is never exported from <code>math.js</code>. Now once our code is minified this unused  export is eliminated from our bundle. This is great! So how do we implement this feature into our build?</p>
<p>In order for tree shaking to work we need to tell Babel to stop transpiling our es2015 modules into commonjs modules. We do so by adding module: false in our .babelrc file.</p>
<pre><code><table class='code-table'><tr>
                <td class='line-number' data-pseudo-content=1></td>
                <td>{</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=2></td>
                <td>  <span class="hljs-string">"presets"</span>: [</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=3></td>
                <td>    [<span class="hljs-string">"es2015"</span>, {<span class="hljs-string">"module"</span>: <span class="hljs-literal">false</span>}],</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=4></td>
                <td>    <span class="hljs-string">"react"</span>,</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=5></td>
                <td>    <span class="hljs-string">"stage-2"</span></td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=6></td>
                <td>  ]</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=7></td>
                <td>}</td>
              </tr><tr>
                <td class='line-number' data-pseudo-content=8></td>
                <td></td>
              </tr></table></code></pre>
<p>Now Webpack can handle these imports and is able to statically analyze them. The next step to achieve our tree shake is the minification of our bundle for production. This step will remove any unused code from our build. That is it! With small apps this may not provide huge wins but when using large libraries this could provide significant savings in bundled bytes.</p>

    
  </section>

<!-- footer -->
      <!-- <script src="//static/js/index_bundled.js"</script> -->
      <footer class="site-footer">
        <div class="wrap wrap-footer">
          <div class="site-footer-widget widget-biz">
            <h3 class="widget-biz-header">TheATXVegan.com</h3>
            <a href="mailto:theatxvegan@gmail.com">theatxvegan@gmail.com</a>
          </div>
          <div class="site-footer-widget widget-social">
            <ul>
              <li>
                <a href="https://www.instagram.com/atxvegan/" class="widget-social-link">
                  <svg viewBox="0 0 512 512" width="25" height="25">
                    <path fill="#828282"  d="M256 109.3c47.8 0 53.4.2 72.3 1 17.4.8 26.9 3.7 33.2 6.2 8.4 3.2 14.3 7.1 20.6 13.4 6.3 6.3 10.1 12.2 13.4 20.6 2.5 6.3 5.4 15.8 6.2 33.2.9 18.9 1 24.5 1 72.3s-.2 53.4-1 72.3c-.8 17.4-3.7 26.9-6.2 33.2-3.2 8.4-7.1 14.3-13.4 20.6-6.3 6.3-12.2 10.1-20.6 13.4-6.3 2.5-15.8 5.4-33.2 6.2-18.9.9-24.5 1-72.3 1s-53.4-.2-72.3-1c-17.4-.8-26.9-3.7-33.2-6.2-8.4-3.2-14.3-7.1-20.6-13.4-6.3-6.3-10.1-12.2-13.4-20.6-2.5-6.3-5.4-15.8-6.2-33.2-.9-18.9-1-24.5-1-72.3s.2-53.4 1-72.3c.8-17.4 3.7-26.9 6.2-33.2 3.2-8.4 7.1-14.3 13.4-20.6 6.3-6.3 12.2-10.1 20.6-13.4 6.3-2.5 15.8-5.4 33.2-6.2 18.9-.8 24.5-1 72.3-1m0-32.2c-48.6 0-54.7.2-73.8 1.1-19 .9-32.1 3.9-43.4 8.3-11.8 4.6-21.7 10.7-31.7 20.6C97.2 117 91 127 86.5 138.8c-4.4 11.4-7.4 24.4-8.3 43.4-.9 19.1-1.1 25.2-1.1 73.8 0 48.6.2 54.7 1.1 73.8.9 19 3.9 32.1 8.3 43.4 4.6 11.8 10.7 21.7 20.6 31.7 9.9 9.9 19.9 16.1 31.7 20.6 11.4 4.4 24.4 7.4 43.4 8.3 19.1.9 25.2 1.1 73.8 1.1s54.7-.2 73.8-1.1c19-.9 32.1-3.9 43.4-8.3 11.8-4.6 21.7-10.7 31.7-20.6 9.9-9.9 16.1-19.9 20.6-31.7 4.4-11.4 7.4-24.4 8.3-43.4.9-19.1 1.1-25.2 1.1-73.8s-.2-54.7-1.1-73.8c-.9-19-3.9-32.1-8.3-43.4-4.6-11.8-10.7-21.7-20.6-31.7C395 97.2 385 91 373.2 86.5c-11.4-4.4-24.4-7.4-43.4-8.3-19.1-.9-25.2-1.1-73.8-1.1z"/>
                    <path fill="#828282"  d="M256 164.1c-50.7 0-91.9 41.1-91.9 91.9s41.1 91.9 91.9 91.9 91.9-41.1 91.9-91.9-41.2-91.9-91.9-91.9zm0 151.5c-32.9 0-59.6-26.7-59.6-59.6s26.7-59.6 59.6-59.6 59.6 26.7 59.6 59.6-26.7 59.6-59.6 59.6z"/>
                    <circle fill="#828282"  cx="351.5" cy="160.5" r="21.5"/>
                  </svg>
                  <span>atxvegan</span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/theatxvegan" class="widget-social-link">
                  <svg viewBox="0 0 512 512" width="25" height="25">
                    <path fill="#828282" d="M419.6 168.6c-11.7 5.2-24.2 8.7-37.4 10.2 13.4-8.1 23.8-20.8 28.6-36-12.6 7.5-26.5 12.9-41.3 15.8C357.6 146 340.7 138 322 138c-42 0-72.9 39.2-63.4 79.9-54.1-2.7-102.1-28.6-134.2-68-17 29.2-8.8 67.5 20.1 86.9-10.7-.3-20.7-3.3-29.5-8.1-.7 30.2 20.9 58.4 52.2 64.6-9.2 2.5-19.2 3.1-29.4 1.1 8.3 25.9 32.3 44.7 60.8 45.2-27.4 21.4-61.8 31-96.4 27 28.8 18.5 63 29.2 99.8 29.2 120.8 0 189.1-102.1 185-193.6 12.9-9.1 23.9-20.5 32.6-33.6z"/>
                  </svg>
                  <span>@theATXvegan</span>
                </a>
              </li>
            </ul>
          </div>
          <div class="site-footer-widget widget-desc">
            <p>Vegan cooking and recipes along with reviews of some of the best vegan food spots in Austin!</p>
          </div>
        </div>
      </footer>
    </main>
    <script src="/static/js/search.js"></script>
  </body>
</html>

<!-- /footer -->

<!-- /body -->
